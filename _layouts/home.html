---
---
<!doctype html>
<html lang="ko">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>{{ page.title | default: site.title }}</title>
    <meta name="description" content="{{ site.description | default: 'Morning Calm style home' }}" />
    <meta name="keywords" content="블로그, 여행, 포토, 에디토리얼" />
    <meta property="og:type" content="website" />
    <meta property="og:title" content="{{ page.title | default: site.title }}" />
    <meta property="og:description" content="{{ site.description | default: 'Morning Calm style home' }}" />
    <meta property="og:url" content="{{ site.url }}{{ page.url }}" />
    <meta property="og:image" content="{{ '/assets/base_image/test_image.png' | absolute_url }}" />

    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard/dist/web/static/pretendard.css" rel="stylesheet" />
    <link href="https://cdn.jsdelivr.net/npm/remixicon@4.6.0/fonts/remixicon.css" rel="stylesheet" />
    <link href="{{ '/assets/css/home-mag.css' | relative_url }}" rel="stylesheet" />
  </head>
  <body id="home" data-baseurl="{{ site.baseurl | default: '' }}">
    <div class="search is-hidden" id="searchLayer">
      <div class="container">
        <form action="{{ '/search/' | relative_url }}" method="get" class="search-form">
          <input class="search-input" type="text" name="q" placeholder="검색어를 입력하세요." />
        </form>
        <div class="search-live-results" id="searchLiveResults"></div>
      </div>
    </div>

    <header class="header">
      <div class="container">
        <div class="columns header-row">
          <div class="column left">
            <a href="{{ '/' | relative_url }}" class="header-logo">Minnong's blog</a>
          </div>
          <div class="column right">
            <nav class="header-nav">
              <ul>
                <li><button class="toggle-search" type="button"><i class="ri-search-line"></i></button></li>
                <li><button class="toggle-nav" type="button"><i class="ri-menu-line"></i></button></li>
              </ul>
            </nav>
          </div>
        </div>

        <nav class="nav is-hidden" id="menuLayer">
          <ul>
            <li><a href="{{ '/' | relative_url }}">Home</a></li>
            <li><a href="{{ '/about/' | relative_url }}">About</a></li>
            <li><a href="{{ '/photostream/' | relative_url }}">Photo</a></li>
            <li><a href="{{ '/archive/' | relative_url }}">Archive</a></li>
            <li><a href="{{ '/tags/' | relative_url }}">Tags</a></li>
            <li><a href="{{ '/search/?q=blog+update' | relative_url }}">Blog update</a></li>
          </ul>
        </nav>
      </div>
    </header>

    <main class="main">
      {% assign hero_posts = site.posts | slice: 0, 4 %}
      {% assign grid_posts = site.posts | slice: 0, 15 %}

      <section class="section">
        <div class="container">
          <header class="section-header">
            <h1 class="title"><span id="home-issue-date">{{ "now" | date: "%B %Y" }}</span> Issue</h1>
          </header>

          {% if hero_posts.size > 0 %}
            <div class="columns">
              <div class="column">
                <div class="carousel js-carousel" aria-label="Featured posts carousel">
                  <div class="carousel-track">
                    {% for post in hero_posts %}
                      {% assign cover = post.image | default: '/assets/base_image/test_image.png' %}
                      <div class="carousel-cell{% if forloop.first %} is-active{% endif %}">
                        <a href="{{ post.url | relative_url }}">
                          <div class="cover-image">
                            <img src="{{ cover | relative_url }}" alt="{{ post.title }}" />
                          </div>
                        </a>
                      </div>
                    {% endfor %}
                  </div>
                  <button class="carousel-btn prev" type="button" aria-label="Previous slide">
                    <i class="ri-arrow-left-s-line"></i>
                  </button>
                  <button class="carousel-btn next" type="button" aria-label="Next slide">
                    <i class="ri-arrow-right-s-line"></i>
                  </button>
                </div>
              </div>
            </div>
          {% else %}
            <p class="empty">포스트를 추가하면 캐러셀이 표시됩니다.</p>
          {% endif %}

          {% if grid_posts.size > 0 %}
            <div class="columns card-grid">
              {% for post in grid_posts %}
                {% assign cover = post.image | default: '/assets/base_image/test_image.png' %}
                <div class="column card-column">
                  <a href="{{ post.url | relative_url }}" class="card-link">
                    <article class="card">
                      <header class="card-header">
                        <div class="title-small">{{ post.categories | first | default: "Feature" }}</div>
                        <div class="title-small">{{ post.date | date: "%Y.%m.%d" }}</div>
                      </header>
                      <div class="card-columns">
                        <div class="card-image-wrap">
                          <img src="{{ cover | relative_url }}" alt="{{ post.title }}" />
                        </div>
                        <div class="card-content">
                          <h2>{{ post.title }}</h2>
                          <p>{{ post.excerpt | strip_html | truncate: 130 }}</p>
                        </div>
                      </div>
                    </article>
                  </a>
                </div>
              {% endfor %}
            </div>
          {% endif %}
        </div>
      </section>
    </main>

    {% include site-footer.html %}

    <script src="{{ '/assets/js/site-search.js' | relative_url }}"></script>
    <script>
      var menuLayer = document.getElementById('menuLayer');
      var menuButton = document.querySelector('.toggle-nav');
      var issueDate = document.getElementById('home-issue-date');

      if (menuButton && menuLayer) {
        menuButton.addEventListener('click', function () {
          menuLayer.classList.toggle('is-hidden');
        });
      }

      if (issueDate) {
        var now = new Date();
        var monthYear = new Intl.DateTimeFormat('en-US', { month: 'long', year: 'numeric' }).format(now);
        issueDate.textContent = monthYear;
      }

      var carousel = document.querySelector('.js-carousel');
      if (carousel) {
        var track = carousel.querySelector('.carousel-track');
        var cells = carousel.querySelectorAll('.carousel-cell');
        var prevBtn = carousel.querySelector('.carousel-btn.prev');
        var nextBtn = carousel.querySelector('.carousel-btn.next');
        var currentIndex = 0;
        var autoTimer = null;

        function showSlide(index) {
          if (!cells.length || !track) return;
          currentIndex = (index + cells.length) % cells.length;
          track.style.transform = 'translateX(' + (-currentIndex * 100) + '%)';
        }

        function startAutoSlide() {
          stopAutoSlide();
          autoTimer = setInterval(function () {
            showSlide(currentIndex + 1);
          }, 3400);
        }

        function stopAutoSlide() {
          if (autoTimer) {
            clearInterval(autoTimer);
            autoTimer = null;
          }
        }

        if (prevBtn) {
          prevBtn.addEventListener('click', function () {
            showSlide(currentIndex - 1);
            startAutoSlide();
          });
        }
        if (nextBtn) {
          nextBtn.addEventListener('click', function () {
            showSlide(currentIndex + 1);
            startAutoSlide();
          });
        }

        carousel.addEventListener('mouseenter', stopAutoSlide);
        carousel.addEventListener('mouseleave', startAutoSlide);

        showSlide(0);
        startAutoSlide();
      }
    </script>
  </body>
</html>
